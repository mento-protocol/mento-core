[profile.default]
src = "contracts"
out = "out"
test = "test"
libs = ["lib"]
script = "script"
auto_detect_solc = true
bytecode_hash = "none"
fuzz_runs = 256
gas_reports = ["*"]
optimizer = false
optimizer_runs = 200
legacy = true
no_match_contract = "(ForkTest)|(GovernanceGasTest)"

allow_paths = [
  "node_modules/@celo"
]

fs_permissions = [
    { access = "read", path = "out" },
    { access = "read-write", path = "test/fixtures" }
]

additional_compiler_profiles = [ 
    { name = "via-ir-opt", via_ir = true, optimizer = true } 
]

compilation_restrictions = [
  { paths = "contracts/governance/Airgrab.sol", via_ir = true, optimizer = true },
  { paths = "contracts/tokens/StableTokenV2.sol", via_ir = true, optimizer = true },
]

[profile.ci]
via_ir=true
optimizer=true
fuzz_runs = 1_000
verbosity = 3

[profile.fork-tests]
no_match_contract = "_random" # in order to reset the no_match_contract
match_contract = "ForkTest"

[rpc_endpoints]
celo="${CELO_MAINNET_RPC_URL}"
baklava="${BAKLAVA_RPC_URL}"
alfajores="${ALFAJORES_RPC_URL}"
